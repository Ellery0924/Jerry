{"version":3,"sources":["../../es6/reducer/hostManage.js"],"names":[],"mappings":"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","file":"hostManage.js","sourcesContent":["/**\n * Created by Ellery1 on 16/1/2.\n */\nimport Immutable from 'immutable';\n\nexport function receiveConfig(config, server) {\n\n    return Immutable.fromJS({config, server}).updateIn(['config', 'multiDeleteDisabled'], _=>true);\n}\n\nexport function selectEnv(state, groupName, ruleIndex, env) {\n\n    return state\n        .updateIn(['config', 'group', groupName, ruleIndex, 'current'], _=>env)\n        .updateIn(['config', 'group', groupName, ruleIndex, 'cache', env], hostIndex=> {\n\n            return hostIndex ? hostIndex :\n                env === 'custom' || env === 'online' ? '' : 1;\n        });\n}\n\nexport function selectGroup(state, groupName) {\n\n    return state\n        .updateIn(['config', 'activated'], _=>groupName)\n        .updateIn(['config', 'multiDeleteDisabled'], _=>true)\n        .updateIn(['config', 'group', groupName], ruleList=>ruleList.map(rule=>rule.set('selected', false)));\n}\n\nexport function selectHost(state, groupName, ruleIndex, env, host) {\n\n    return state.updateIn(['config', 'group', groupName, ruleIndex, 'cache', env], _=>host);\n}\n\nexport function insertRule(state, groupName, ruleList) {\n\n    return state.updateIn(\n        ['config', 'group', groupName],\n        rules=>rules.concat(Immutable.fromJS(ruleList))\n    );\n}\n\nexport function insertGroup(state, groupName) {\n\n    return state\n        .updateIn(\n            ['config', 'group'],\n            group=>group.set(groupName, Immutable.fromJS([]))\n        )\n        .updateIn(['config', 'activated'], _=>groupName);\n}\n\nexport function deleteRule(state, groupName, ruleIndex) {\n\n    return state.updateIn(\n        ['config', 'group', groupName],\n        rules=>rules.filter((rule, index)=>ruleIndex !== index)\n    );\n}\n\nexport function deleteGroup(state, groupName) {\n\n    return state\n        .updateIn(\n            ['config', 'group'],\n            group=> {\n                var newGroup = {},\n                    groupObj = group.toJS();\n\n                Object.keys(groupObj).forEach((key)=> {\n                    if (key !== groupName) {\n                        newGroup[key] = groupObj[key];\n                    }\n                });\n\n                return Immutable.fromJS(newGroup);\n            }\n        )\n        .updateIn(['config', 'activated'], _=>'default');\n}\n\nexport function editDomain(state, groupName, ruleIndex, domain) {\n\n    return state.updateIn(\n        ['config', 'group', groupName, ruleIndex, 'domain'],\n        _=>domain\n    );\n}\n\nexport function selectRule(state, groupName, ruleIndex) {\n\n    return state\n        .updateIn(['config', 'group', groupName, ruleIndex, 'selected'], _=> true)\n        .updateIn(['config', 'multiDeleteDisabled'], _=>false);\n}\n\nexport function deselectRule(state, groupName, ruleIndex) {\n\n    var newState = state.updateIn(['config', 'group', groupName, ruleIndex, 'selected'], _=>false);\n\n    return newState\n        .updateIn(\n            ['config', 'multiDeleteDisabled'],\n            _=>newState.get('config').get('group').get(groupName).every(rule=>!rule.get('selected'))\n        );\n}\n\nexport function multiDeleteRule(state, groupName) {\n\n    return state\n        .updateIn(['config', 'group', groupName], ruleList=>ruleList.filter(rule=>!rule.get('selected')))\n        .updateIn(['config', 'multiDeleteDisabled'], _=>true);\n}\n\nexport function switchHttps(state, isOn) {\n\n    return state.updateIn(['config', 'httpsOn'], _=>isOn);\n}"]}